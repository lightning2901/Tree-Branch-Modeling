# Simple Synth Tree ðŸŒ³

A Python-based simulation model for generating synthetic tree point clouds.

Source code associated with:

M. Bryson, F. Wang, and J. Allworth, "Using synthetic tree data in deep learning-based individual tree segmentation using LiDAR point clouds", *Remote Sens.*, 2023, 15(9), 2380.

[https://www.mdpi.com/2072-4292/15/9/2380](https://www.mdpi.com/2072-4292/15/9/2380)

# Repository creators

1. Edgar Leonardo GarcÃ­a Zavala leo261102leo@gmail.com

### Requirements

- `numpy`
- `trimesh`
- `laspy` (for .las file export)

![](media/example_trees.png)

## Description

This repository implements a tree simulation model using synthetic data for tree segmentation from LiDAR point clouds, inspired by the approach described in *"Using Synthetic Tree Data in Deep Learning-Based Tree Segmentation Using LiDAR Point Clouds"* by Bryson et al. (2023). The model allows the definition of initial conditions for a synthetic tree, optimizes key parameters, and applies this data to train deep learning-based segmentation models.

### Model Functionality

The model generates synthetic trees from initial parameters such as height, diameter, and canopy shape. These synthetic trees are then used to simulate LiDAR point clouds and train neural networks for trunk and foliage segmentation in forest environments. The tree simulation is based on the `gen_simtree` function, which generates synthetic data adjusted to defined parameters, such as height range (`height_range`), diameter range (`diam_range`), branching probability (`split_prob`), among others.

### Key Features

- **Synthetic Tree Simulation**: 3D tree generation based on configurable parameters.
- **Parameter Adjustment**: Optimizing parameters to generate trees that meet specific initial conditions.
- **LiDAR Segmentation**: Creating simulated LiDAR data to train segmentation models.
- **Deep Learning Model Training**: Using synthetic trees and LiDAR data to train neural networks.

## About

"Simple Synth Tree" is a lightweight Python library for generating simple synthetic point clouds of simulated trees. The simulation creates a randomized tree model composed of a central stem mesh and foliage/small branches, from which points are sampled from the surface of the mesh. The generated point clouds are labeled per point into one of two classes: (Class 0: foliage/small branches and Class 1: tree stem).

![](media/process.png)

Different tree structures can be generated by tuning the model parameters to control aspects such as tree height, canopy width and shape, branching, etc. The simulator is designed to produce synthetic point clouds that help train deep neural networks for LiDAR point cloud-based tree analysis tasks. (Refer to our *Remote Sensing* paper for further details on how using synthetic examples during training can improve performance on real LiDAR point cloud processing tasks in forest remote sensing).

## Usage

See `generate_example_tree.py` to generate an example tree:

```python
points = gen_simtree(Np=4096)
export_points_ply('example001.ply', points)
